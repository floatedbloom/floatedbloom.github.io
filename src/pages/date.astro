---
import Layout from '../layouts/Layout.astro';
import Card from '../components/Card.astro';
const pageTitle = "Date";
---

<Layout title="Date">
	<main>
		<head>
            <meta name="viewport" content="initial-scale=1, width=device-width">
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
            <title>{pageTitle}</title>
        </head>
        <body>
            <div class="content-container">
                <div class="d-grid gap-2 col-6 mx-auto central">
                  <button class="btn btn-primary" type="button" id="open_popup">Give me the date</button>
                </div>
            </div>
            <div id="popup" class="popup">
                <div class="popup-content">
                    <span class="close" id="close_popup">&times;</span>
                    <h2 class="central">Here is the date</h2>
                    <p class="central">The date is <var id="date">___</var></p>
                </div>
            </div>
            <script>
                // Get the elements
                const openButton = document.getElementById("open_popup") as HTMLButtonElement | null;
                const popup = document.getElementById("popup") as HTMLDivElement | null;
                const closeButton = document.getElementById("close_popup") as HTMLSpanElement | null;
                const dateElement = document.getElementById("date") as HTMLSpanElement | null;
                const contentContainer = document.querySelector('.content-container') as HTMLDivElement | null;
            
                // Hide the popup initially
                if (popup) {
                popup.style.display = "none";
                }
            
                // Check if all elements exist
                if (openButton && popup && closeButton && dateElement && contentContainer) {
                openButton.addEventListener('click', function () {
                    const currentDate = new Date();
                    const options: Intl.DateTimeFormatOptions = { month: 'long', day: 'numeric', year: 'numeric' };
                    const stringDate = currentDate.toLocaleDateString('en-US', options);
                    dateElement.textContent = ` ${stringDate}`;
                    popup.style.display = "flex"; // Show the popup
                    contentContainer.style.filter = "blur(5px)"; // Blur the background
                });
            
                closeButton.addEventListener('click', function () {
                    popup.style.display = "none"; // Hide the popup
                    contentContainer.style.filter = "none"; // Remove the blur effect
                });
            
                // Close the popup if the user clicks outside of it
                window.addEventListener('click', function(event) {
                    if (event.target === popup) {
                    popup.style.display = "none";
                    contentContainer.style.filter = "none";
                    }
                });
                } else {
                console.error("One or more elements not found");
                }
            </script>
        </body>
	</main>
</Layout>
